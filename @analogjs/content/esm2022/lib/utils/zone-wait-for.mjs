import { firstValueFrom, isObservable } from 'rxjs';
export async function waitFor(prom) {
    if (isObservable(prom)) {
        prom = firstValueFrom(prom);
    }
    const macroTask = Zone.current.scheduleMacroTask(`AnalogContentResolve-${Math.random()}`, () => { }, {}, () => { });
    return prom.then((p) => {
        macroTask.invoke();
        return p;
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiem9uZS13YWl0LWZvci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2NvbnRlbnQvc3JjL2xpYi91dGlscy96b25lLXdhaXQtZm9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFjLE1BQU0sTUFBTSxDQUFDO0FBSWhFLE1BQU0sQ0FBQyxLQUFLLFVBQVUsT0FBTyxDQUFJLElBQWdDO0lBQy9ELElBQUksWUFBWSxDQUFDLElBQUksQ0FBQyxFQUFFO1FBQ3RCLElBQUksR0FBRyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDN0I7SUFDRCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUM5Qyx3QkFBd0IsSUFBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLEVBQ3ZDLEdBQUcsRUFBRSxHQUFFLENBQUMsRUFDUixFQUFFLEVBQ0YsR0FBRyxFQUFFLEdBQUUsQ0FBQyxDQUNULENBQUM7SUFDRixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFJLEVBQUUsRUFBRTtRQUN4QixTQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDbkIsT0FBTyxDQUFDLENBQUM7SUFDWCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmaXJzdFZhbHVlRnJvbSwgaXNPYnNlcnZhYmxlLCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5cbmRlY2xhcmUgY29uc3QgWm9uZTogYW55O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FpdEZvcjxUPihwcm9tOiBQcm9taXNlPFQ+IHwgT2JzZXJ2YWJsZTxUPik6IFByb21pc2U8VD4ge1xuICBpZiAoaXNPYnNlcnZhYmxlKHByb20pKSB7XG4gICAgcHJvbSA9IGZpcnN0VmFsdWVGcm9tKHByb20pO1xuICB9XG4gIGNvbnN0IG1hY3JvVGFzayA9IFpvbmUuY3VycmVudC5zY2hlZHVsZU1hY3JvVGFzayhcbiAgICBgQW5hbG9nQ29udGVudFJlc29sdmUtJHtNYXRoLnJhbmRvbSgpfWAsXG4gICAgKCkgPT4ge30sXG4gICAge30sXG4gICAgKCkgPT4ge31cbiAgKTtcbiAgcmV0dXJuIHByb20udGhlbigocDogVCkgPT4ge1xuICAgIG1hY3JvVGFzay5pbnZva2UoKTtcbiAgICByZXR1cm4gcDtcbiAgfSk7XG59XG4iXX0=